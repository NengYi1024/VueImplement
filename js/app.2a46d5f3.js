(function(e){function t(t){for(var o,s,c=t[0],l=t[1],i=t[2],u=0,p=[];u<c.length;u++)s=c[u],Object.prototype.hasOwnProperty.call(n,s)&&n[s]&&p.push(n[s][0]),n[s]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(e[o]=l[o]);d&&d(t);while(p.length)p.shift()();return r.push.apply(r,i||[]),a()}function a(){for(var e,t=0;t<r.length;t++){for(var a=r[t],o=!0,c=1;c<a.length;c++){var l=a[c];0!==n[l]&&(o=!1)}o&&(r.splice(t--,1),e=s(s.s=a[0]))}return e}var o={},n={app:0},r=[];function s(t){if(o[t])return o[t].exports;var a=o[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=e,s.c=o,s.d=function(e,t,a){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)s.d(a,o,function(t){return e[t]}.bind(null,o));return a},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/VueImplement/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=t,c=c.slice();for(var i=0;i<c.length;i++)t(c[i]);var d=l;r.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},1:function(e,t){},1157:function(e,t,a){},"13b6":function(e,t,a){},1532:function(e,t,a){"use strict";a("1157")},"1e0f":function(e,t,a){"use strict";a("816c")},"24e4":function(e,t,a){},"2d06":function(e,t,a){},"50ab":function(e,t,a){"use strict";a("ed22")},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var o=a("7a23"),n={class:"mb-5"};function r(e,t,a,r,s,c){var l=Object(o["v"])("NavbarView"),i=Object(o["v"])("OffcanvasView"),d=Object(o["v"])("router-view");return Object(o["q"])(),Object(o["d"])(o["a"],null,[Object(o["g"])(l),Object(o["g"])(i,{path:e.path,pathname:e.pathname,usercheck:e.usercheck,avatarcheck:e.avatarcheck,userlevel:e.userlevel,useravatar:e.useravatar,usernickname:e.usernickname},null,8,["path","pathname","usercheck","avatarcheck","userlevel","useravatar","usernickname"]),Object(o["g"])("div",n,[Object(o["g"])(d)])],64)}var s=a("5530"),c={class:"navbar navbar-expand-sm navbar-dark bg-dark sticky-top"},l=Object(o["g"])("div",{class:"container-fluid"},[Object(o["g"])("button",{class:"btn btn-dark",type:"button","data-bs-toggle":"offcanvas","data-bs-target":"#side-offcanvas","aria-controls":"offcanvasExample"},[Object(o["g"])("span",{class:"navbar-toggler-icon"})]),Object(o["g"])("a",{class:"navbar-brand mx-auto fw-bolder",id:"navbar-title",href:"#"},"功能實作")],-1);function i(e,t){return Object(o["q"])(),Object(o["d"])("nav",c,[l])}a("9483");const d={};d.render=i;var u=d,p={class:"offcanvas offcanvas-start",tabindex:"-1",id:"side-offcanvas","aria-labelledby":"offcanvasExampleLabel"},m={class:"offcanvas-header d-flex my-auto mt-4"},b={key:0,class:"d-flex ms-3"},g=Object(o["g"])("span",{class:"rounded-circle"},[Object(o["g"])("svg",{xmlns:"http://www.w3.org/2000/svg",width:"35",height:"35",fill:"currentColor",class:"bi bi-person-circle",viewBox:"0 0 16 16"},[Object(o["g"])("path",{d:"M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"}),Object(o["g"])("path",{"fill-rule":"evenodd",d:"M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1z"})])],-1),f=Object(o["g"])("span",{class:"align-middle my-auto ms-2"}," Lv.0 ",-1),h={key:1,class:"d-flex ms-3"},w={key:0,class:"rounded-circle mt-2"},v=Object(o["g"])("svg",{xmlns:"http://www.w3.org/2000/svg",width:"35",height:"35",fill:"currentColor",class:"bi bi-person-circle",viewBox:"0 0 16 16"},[Object(o["g"])("path",{d:"M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"}),Object(o["g"])("path",{"fill-rule":"evenodd",d:"M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1z"})],-1),O={class:"align-middle my-auto ms-3 p-0"},j={class:"mt-1 mb-0 fw-bolder"},x={class:"m-0"},y=Object(o["g"])("svg",{xmlns:"http://www.w3.org/2000/svg",width:"30",height:"30",type:"button",class:"bi bi-list me-3","data-bs-dismiss":"offcanvas","aria-label":"Close",fill:"currentColor",viewBox:"0 0 16 16"},[Object(o["g"])("path",{"fill-rule":"evenodd",d:"M2.5 12a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5z"})],-1),k={class:"offcanvas-body"},S=Object(o["g"])("hr",null,null,-1),C={class:"accordion accordion-flush",id:"accordionFlushExample"},I=Object(o["g"])("h2",{class:"accordion-header",id:"flush-headingOne"},[Object(o["g"])("button",{class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#flush-collapseOne"},[Object(o["g"])("svg",{xmlns:"http://www.w3.org/2000/svg",width:"25",height:"25",fill:"currentColor",class:"bi bi-bank2 me-1",viewBox:"0 0 16 16"},[Object(o["g"])("path",{d:"M8.277.084a.5.5 0 0 0-.554 0l-7.5 5A.5.5 0 0 0 .5 6h1.875v7H1.5a.5.5 0 0 0 0 1h13a.5.5 0 1 0 0-1h-.875V6H15.5a.5.5 0 0 0 .277-.916l-7.5-5zM12.375 6v7h-1.25V6h1.25zm-2.5 0v7h-1.25V6h1.25zm-2.5 0v7h-1.25V6h1.25zm-2.5 0v7h-1.25V6h1.25zM8 4a1 1 0 1 1 0-2 1 1 0 0 1 0 2zM.5 15a.5.5 0 0 0 0 1h15a.5.5 0 1 0 0-1H.5z"})]),Object(o["f"])(" 主頁 ")])],-1),z=Object(o["g"])("div",{id:"flush-collapseOne","data-bs-parent":"#accordionFlushExample"},null,-1),B={class:"accordion-header",id:"flush-headingTwo"},M={class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#flush-collapseTwo"},A=Object(o["g"])("svg",{xmlns:"http://www.w3.org/2000/svg",width:"25",height:"25",fill:"currentColor",class:"bi bi-person-fill me-1",viewBox:"0 0 16 16"},[Object(o["g"])("path",{d:"M3 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H3zm5-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"})],-1),V=Object(o["g"])("div",{id:"flush-collapseTwo","data-bs-parent":"#accordionFlushExample"},null,-1),T=Object(o["g"])("h2",{class:"accordion-header",id:"flush-headingThree"},[Object(o["g"])("button",{class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#flush-collapseThree","aria-expanded":"false","aria-controls":"flush-collapseThree"},[Object(o["g"])("svg",{xmlns:"http://www.w3.org/2000/svg",width:"25",height:"25",fill:"currentColor",class:"bi bi-justify me-1",viewBox:"0 0 16 16"},[Object(o["g"])("path",{"fill-rule":"evenodd",d:"M2 12.5a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5zm0-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5zm0-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5zm0-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5z"})]),Object(o["f"])(" 選項 ")])],-1),L={id:"flush-collapseThree",class:"accordion-collapse collapse","aria-labelledby":"flush-headingThree","data-bs-parent":"#accordionFlushExample"},E={class:"accordion-body"},F={class:"list-unstyled"},H={class:"d-flex"},q=Object(o["g"])("svg",{xmlns:"http://www.w3.org/2000/svg",width:"25",height:"25",fill:"currentColor",class:"bi bi-chat-right-text me-1 pb-1",viewBox:"0 0 16 16"},[Object(o["g"])("path",{d:"M2 1a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h9.586a2 2 0 0 1 1.414.586l2 2V2a1 1 0 0 0-1-1H2zm12-1a2 2 0 0 1 2 2v12.793a.5.5 0 0 1-.854.353l-2.853-2.853a1 1 0 0 0-.707-.293H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h12z"}),Object(o["g"])("path",{d:"M3 3.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zM3 6a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9A.5.5 0 0 1 3 6zm0 2.5a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5z"})],-1),U=Object(o["f"])("留言板(請登入)"),P=Object(o["g"])("h2",{class:"accordion-header",id:"flush-headingFour"},[Object(o["g"])("button",{class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#flush-collapseFour","aria-expanded":"false","aria-controls":"flush-collapseFour"},[Object(o["g"])("svg",{xmlns:"http://www.w3.org/2000/svg",width:"25",height:"25",fill:"currentColor",class:"bi bi-tag-fill me-1",viewBox:"0 0 16 16"},[Object(o["g"])("path",{d:"M2 1a1 1 0 0 0-1 1v4.586a1 1 0 0 0 .293.707l7 7a1 1 0 0 0 1.414 0l4.586-4.586a1 1 0 0 0 0-1.414l-7-7A1 1 0 0 0 6.586 1H2zm4 3.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z"})]),Object(o["f"])(" 標籤(待開發) ")])],-1),D=Object(o["g"])("div",{id:"flush-collapseFour",class:"accordion-collapse collapse","aria-labelledby":"flush-headingFour","data-bs-parent":"#accordionFlushExample"},null,-1),N=Object(o["g"])("h2",{class:"accordion-header",id:"flush-headingFive"},[Object(o["g"])("button",{class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#flush-collapseFive","aria-expanded":"false","aria-controls":"flush-collapseFive"},[Object(o["g"])("svg",{xmlns:"http://www.w3.org/2000/svg",width:"25",height:"25",fill:"currentColor",class:"bi bi-grid-3x3-gap-fill me-1",viewBox:"0 0 16 16"},[Object(o["g"])("path",{d:"M1 2a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2zm5 0a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V2zm5 0a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1h-2a1 1 0 0 1-1-1V2zM1 7a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V7zm5 0a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V7zm5 0a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1h-2a1 1 0 0 1-1-1V7zM1 12a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1v-2zm5 0a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1v-2zm5 0a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1h-2a1 1 0 0 1-1-1v-2z"})]),Object(o["f"])(" 分類(待開發) ")])],-1),R=Object(o["g"])("div",{id:"flush-collapseFive",class:"accordion-collapse collapse","aria-labelledby":"flush-headingFive","data-bs-parent":"#accordionFlushExample"},null,-1),J=Object(o["g"])("hr",null,null,-1);function _(e,t,a,n,r,s){var c=Object(o["v"])("router-link");return Object(o["q"])(),Object(o["d"])("div",p,[Object(o["g"])("div",m,[a.usercheck?Object(o["e"])("",!0):(Object(o["q"])(),Object(o["d"])("div",b,[g,f])),a.usercheck?(Object(o["q"])(),Object(o["d"])("div",h,[a.avatarcheck?Object(o["e"])("",!0):(Object(o["q"])(),Object(o["d"])("span",w,[v])),a.avatarcheck?(Object(o["q"])(),Object(o["d"])("img",{key:1,src:a.useravatar,id:"user-avatar",alt:""},null,8,["src"])):Object(o["e"])("",!0),Object(o["g"])("div",O,[Object(o["g"])("p",j,Object(o["x"])(a.usernickname),1),Object(o["g"])("p",x,"LV."+Object(o["x"])(a.userlevel),1)])])):Object(o["e"])("",!0),y]),Object(o["g"])("div",k,[S,Object(o["g"])("div",C,[Object(o["g"])(c,{class:"text-decoration-none",to:"/",replace:""},{default:Object(o["E"])((function(){return[I,z]})),_:1}),Object(o["g"])(c,{class:"text-decoration-none",to:a.path},{default:Object(o["E"])((function(){return[Object(o["g"])("h2",B,[Object(o["g"])("button",M,[A,Object(o["f"])(" "+Object(o["x"])(a.pathname),1)])]),V]})),_:1},8,["to"]),T,Object(o["g"])("div",L,[Object(o["g"])("div",E,[Object(o["g"])("ul",F,[Object(o["g"])("li",H,[q,Object(o["g"])(c,{class:"link-dark text-decoration-none",to:"/message_board"},{default:Object(o["E"])((function(){return[U]})),_:1})])])])]),P,D,N,R]),J])])}var Z={name:"Offcanvas",props:{path:{type:String,default:"/login"},pathname:{type:String,default:"登入註冊"},usercheck:{type:Boolean,default:!1},avatarcheck:{type:Boolean,default:!1},useravatar:{type:String,default:""},usernickname:{type:String,default:""},userlevel:{type:String,default:"0"}}};a("1e0f");Z.render=_;var G=Z,K=a("5502"),W={name:"App",components:{NavbarView:u,OffcanvasView:G},setup:function(){var e=Object(K["b"])(),t=Object(o["s"])({path:Object(o["b"])((function(){var t=e.state.auth.user.path;return t})),pathname:Object(o["b"])((function(){var t=e.state.auth.user.pathname;return t})),usercheck:Object(o["b"])((function(){var t=e.state.auth.user.usercheck;return t})),avatarcheck:Object(o["b"])((function(){var t=e.state.auth.user.avatarcheck;return t})),useravatar:Object(o["b"])((function(){var t=e.state.auth.user.useravatar;return t})),usernickname:Object(o["b"])((function(){var t=e.state.auth.user.usernickname;return t})),userlevel:Object(o["b"])((function(){var t=e.state.auth.user.userlevel;return t}))});return Object(o["o"])((function(){})),Object(s["a"])({},Object(o["y"])(t))}};a("d365");W.render=r;var X=W,Q=a("1da1"),Y=(a("96cf"),a("d3b7"),a("25f0"),a("a9e3"),a("6c02")),$=a("260b"),ee=a("ea7b"),te=a("588e"),ae={apiKey:"AIzaSyBS9s4u59GneWMlmQ0AdoDAZsqHMhSjB_0",authDomain:"vue-test-322103.firebaseapp.com",projectId:"vue-test-322103",storageBucket:"vue-test-322103.appspot.com",messagingSenderId:"136729213466",appId:"1:136729213466:web:5ef841ae9f79a0ea2e6fa3"},oe=Object($["a"])(ae),ne=Object(ee["c"])(oe),re=Object(te["c"])(oe),se=a("3452"),ce=a.n(se),le=a("bc3a"),ie=a.n(le),de=(a("ac1f"),a("841c"),a("9911"),{class:"container-fluid col-lg-6 col-md-8 mx-auto mt-3"}),ue=Object(o["g"])("div",{class:"py-3 fw-bloder fs-1",id:"home-title"}," 以RSS資料，來實現站內搜尋功能 ",-1),pe={class:"mt-3"},me={class:"mx-auto mt-1",style:{width:"18rem"}},be={class:"text-dark"},ge={key:0},fe={key:1},he={class:"text-start fs-5"},we={class:"text-dark"};function ve(e,t,a,n,r,s){return Object(o["q"])(),Object(o["d"])("div",de,[ue,Object(o["g"])("div",pe,[Object(o["F"])(Object(o["g"])("input",{type:"text",class:"form-control mx-auto mb-5",maxlength:"15","onUpdate:modelValue":t[1]||(t[1]=function(t){return e.search=t}),spellcheck:"false",placeholder:"搜尋內容",onInput:t[2]||(t[2]=function(){return n.FilterSearch&&n.FilterSearch.apply(n,arguments)}),autofocus:""},null,544),[[o["B"],e.search]]),(Object(o["q"])(!0),Object(o["d"])(o["a"],null,Object(o["u"])(n.FilterSearch(),(function(t,a){return Object(o["q"])(),Object(o["d"])("div",{class:"d-inline-flex col-md-6 mb-5",key:t},[Object(o["g"])("a",{href:t.link,class:"mx-auto mt-1 text-decoration-none border border-3",id:"card-show"},[Object(o["g"])("div",me,[Object(o["g"])("img",{src:t.thumbnail,id:"card-show-image"},null,8,["src"]),Object(o["g"])("div",be,[e.search.length>0?(Object(o["q"])(),Object(o["d"])("div",ge,[Object(o["g"])("p",{innerHTML:e.searchnews[a],class:"text-start fs-5"},null,8,["innerHTML"])])):(Object(o["q"])(),Object(o["d"])("div",fe,[Object(o["g"])("p",he,Object(o["x"])(t.title),1)])),Object(o["g"])("p",we,Object(o["x"])(t.pubDate),1)])])],8,["href"])])})),128))])])}a("d81d"),a("4de4"),a("466d"),a("5319");var Oe={name:"Home",setup:function(){var e=Object(K["b"])(),t=Object(o["s"])({search:"",allnews:[],searchnews:[],filtertext:""});function a(){ie.a.get("https://api.rss2json.com/v1/api.json?rss_url=https%3A%2F%2Fcn.nytimes.com%2Frss%2Fzh-hant%2F").then((function(e){for(var a=0;a<e["data"]["items"].length;a++)t.allnews.push({title:e["data"]["items"][a]["title"],pubDate:e["data"]["items"][a]["pubDate"],link:e["data"]["items"][a]["link"],thumbnail:e["data"]["items"][a]["thumbnail"]})}))}function n(){return t.search.length>0?(t.searchnews=t.allnews.filter((function(e){return e["title"].match(t.search)})).map((function(e){return e["title"].replace(t.search,"<span class='search-text'>"+t.search+"</span>")})),t.allnews.filter((function(e){return e["title"].match(t.search)}))):t.allnews}return Object(o["o"])((function(){if(setInterval(a(),864e5),n(),localStorage.getItem("user")){var t=JSON.parse(localStorage.getItem("user"));e.dispatch("auth/LoginTask",t[0])}else e.dispatch("auth/SignoutTask")})),Object(s["a"])(Object(s["a"])({},Object(o["y"])(t)),{},{GetData:a,FilterSearch:n})}};a("5750");Oe.render=ve;var je=Oe;const xe={};var ye=xe,ke={class:"container-fluid row col-lg-9 col-md-12 mt-5 mx-auto"},Se={class:"col-lg-4 col-md-12 ms-auto border border-3",id:"login-page"},Ce={class:"mx-2"},Ie=Object(o["g"])("h2",{class:"my-4 text-start fw-bold"},"會員登入",-1),ze={class:"form-floating mb-3"},Be=Object(o["g"])("label",{class:"fw-bold"},[Object(o["g"])("svg",{xmlns:"http://www.w3.org/2000/svg",width:"25",height:"25",fill:"currentColor",class:"bi bi-envelope my-auto mx-1",viewBox:"0 0 16 16"},[Object(o["g"])("path",{d:"M0 4a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V4zm2-1a1 1 0 0 0-1 1v.217l7 4.2 7-4.2V4a1 1 0 0 0-1-1H2zm13 2.383-4.758 2.855L15 11.114v-5.73zm-.034 6.878L9.271 8.82 8 9.583 6.728 8.82l-5.694 3.44A1 1 0 0 0 2 13h12a1 1 0 0 0 .966-.739zM1 11.114l4.758-2.876L1 5.383v5.73z"})]),Object(o["f"])("email")],-1),Me={class:"form-floating mb-2"},Ae=Object(o["g"])("label",{class:"fw-bold"},[Object(o["g"])("svg",{xmlns:"http://www.w3.org/2000/svg",width:"25",height:"25",fill:"currentColor",class:"bi bi-lock my-auto ms-1",viewBox:"0 0 16 16"},[Object(o["g"])("path",{d:"M8 1a2 2 0 0 1 2 2v4H6V3a2 2 0 0 1 2-2zm3 6V3a3 3 0 0 0-6 0v4a2 2 0 0 0-2 2v5a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2zM5 8h6a1 1 0 0 1 1 1v5a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V9a1 1 0 0 1 1-1z"})]),Object(o["f"])("密碼")],-1),Ve={class:"row mb-3"},Te={class:"col-5 text-start ms-3"},Le=Object(o["f"])(" 記住我 "),Ee={class:"col-lg-8 col-md-12 mx-auto",id:"register-page"},Fe={class:"ms-2"},He=Object(o["g"])("h2",{class:"my-4 text-start fw-bold"},"會員註冊",-1),qe={class:"row"},Ue={class:"form-floating col-lg-5 col-md-12 mb-3"},Pe=Object(o["g"])("div",{class:"text-start mb-1 ms-2 fw-bold"},"暱稱",-1),De=Object(o["g"])("label",{class:"fw-bold"},[Object(o["g"])("svg",{xmlns:"http://www.w3.org/2000/svg",width:"27",height:"27",fill:"currentColor",class:"bi bi-person mt-4 mx-3",viewBox:"0 0 16 16"},[Object(o["g"])("path",{d:"M8 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6zm2-3a2 2 0 1 1-4 0 2 2 0 0 1 4 0zm4 8c0 1-1 1-1 1H3s-1 0-1-1 1-4 6-4 6 3 6 4zm-1-.004c-.001-.246-.154-.986-.832-1.664C11.516 10.68 10.289 10 8 10c-2.29 0-3.516.68-4.168 1.332-.678.678-.83 1.418-.832 1.664h10z"})])],-1),Ne={class:"form-floating col-lg-5 col-md-12 mb-2"},Re=Object(o["g"])("div",{class:"text-start mb-1 ms-2 fw-bold"},"E-mail",-1),Je=Object(o["g"])("label",{class:"fw-bold"},[Object(o["g"])("svg",{xmlns:"http://www.w3.org/2000/svg",width:"25",height:"25",fill:"currentColor",class:"bi bi-envelope mt-4 mx-3",viewBox:"0 0 16 16"},[Object(o["g"])("path",{d:"M0 4a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V4zm2-1a1 1 0 0 0-1 1v.217l7 4.2 7-4.2V4a1 1 0 0 0-1-1H2zm13 2.383-4.758 2.855L15 11.114v-5.73zm-.034 6.878L9.271 8.82 8 9.583 6.728 8.82l-5.694 3.44A1 1 0 0 0 2 13h12a1 1 0 0 0 .966-.739zM1 11.114l4.758-2.876L1 5.383v5.73z"})])],-1),_e={class:"row"},Ze={class:"form-floating col-lg-5 col-md-12 mb-3"},Ge=Object(o["g"])("div",{class:"text-start mb-1 ms-2 fw-bold"},"密碼",-1),Ke=Object(o["g"])("label",{class:"mt-4"},[Object(o["g"])("svg",{xmlns:"http://www.w3.org/2000/svg",width:"25",height:"25",fill:"currentColor",class:"bi bi-lock ms-3 me-1",viewBox:"0 0 16 16"},[Object(o["g"])("path",{d:"M8 1a2 2 0 0 1 2 2v4H6V3a2 2 0 0 1 2-2zm3 6V3a3 3 0 0 0-6 0v4a2 2 0 0 0-2 2v5a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2zM5 8h6a1 1 0 0 1 1 1v5a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V9a1 1 0 0 1 1-1z"})]),Object(o["f"])("6-16個英數文字")],-1),We={class:"form-floating col-lg-5 col-md-12 mb-2"},Xe=Object(o["g"])("div",{class:"text-start mb-1 ms-2 fw-bold"},"確認密碼",-1),Qe=Object(o["g"])("label",{class:"fw-bold mt-4"},[Object(o["g"])("svg",{xmlns:"http://www.w3.org/2000/svg",width:"25",height:"25",fill:"currentColor",class:"bi bi-lock ms-3 me-1",viewBox:"0 0 16 16"},[Object(o["g"])("path",{d:"M8 1a2 2 0 0 1 2 2v4H6V3a2 2 0 0 1 2-2zm3 6V3a3 3 0 0 0-6 0v4a2 2 0 0 0-2 2v5a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2zM5 8h6a1 1 0 0 1 1 1v5a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V9a1 1 0 0 1 1-1z"})])],-1);function Ye(e,t,a,n,r,s){var c=Object(o["v"])("LoaadView");return Object(o["q"])(),Object(o["d"])(o["a"],null,[Object(o["g"])("div",ke,[Object(o["g"])("div",Se,[Object(o["g"])("form",Ce,[Ie,Object(o["g"])("div",ze,[Object(o["F"])(Object(o["g"])("input",{type:"email",class:e.isemail,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.email=t}),spellcheck:"false",placeholder:"email",onInput:t[2]||(t[2]=function(){return n.isemailverify&&n.isemailverify.apply(n,arguments)}),required:""},null,34),[[o["B"],e.email]]),Be]),Object(o["g"])("div",Me,[Object(o["F"])(Object(o["g"])("input",{type:"password",class:e.ispassword,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.password=t}),spellcheck:"false",minlength:"6",maxlength:"16",placeholder:"password",onInput:t[4]||(t[4]=function(){return n.ispasswordverify&&n.ispasswordverify.apply(n,arguments)}),required:""},null,34),[[o["B"],e.password]]),Ae]),Object(o["g"])("div",Ve,[Object(o["g"])("span",Te,[Object(o["F"])(Object(o["g"])("input",{type:"checkbox","onUpdate:modelValue":t[5]||(t[5]=function(t){return e.checked=t})},null,512),[[o["A"],e.checked]]),Le]),Object(o["g"])("span",{class:"col-6 text-end",onClick:t[6]||(t[6]=function(){return n.ForgetPassword&&n.ForgetPassword.apply(n,arguments)})},"忘記密碼?")]),Object(o["g"])("button",{class:"btn btn-primary col-4 rounded-pill me-2",onClick:t[7]||(t[7]=function(){return n.LoginSend&&n.LoginSend.apply(n,arguments)}),type:"button"}," 登入 ")])]),Object(o["g"])("div",Ee,[Object(o["g"])("form",Fe,[He,Object(o["g"])("div",qe,[Object(o["g"])("div",Ue,[Pe,Object(o["F"])(Object(o["g"])("input",{type:"text",class:e.isnickname,"onUpdate:modelValue":t[8]||(t[8]=function(t){return e.nickname=t}),spellcheck:"false",placeholder:"nickname",maxlength:"6",onInput:t[9]||(t[9]=function(){return n.isnicknameverify&&n.isnicknameverify.apply(n,arguments)}),required:""},null,34),[[o["B"],e.nickname]]),De]),Object(o["g"])("div",Ne,[Re,Object(o["F"])(Object(o["g"])("input",{type:"email",class:e.isnewemail,"onUpdate:modelValue":t[10]||(t[10]=function(t){return e.newemail=t}),spellcheck:"false",placeholder:"email",onInput:t[11]||(t[11]=function(){return n.isnewemailverify&&n.isnewemailverify.apply(n,arguments)}),required:""},null,34),[[o["B"],e.newemail]]),Je])]),Object(o["g"])("div",_e,[Object(o["g"])("div",Ze,[Ge,Object(o["F"])(Object(o["g"])("input",{type:"password",class:e.isnewpassword1,"onUpdate:modelValue":t[12]||(t[12]=function(t){return e.newpassword1=t}),spellcheck:"false",minlength:"6",maxlength:"16",placeholder:"password",onInput:t[13]||(t[13]=function(){return n.isnewpassword1verify&&n.isnewpassword1verify.apply(n,arguments)}),required:""},null,34),[[o["B"],e.newpassword1]]),Ke]),Object(o["g"])("div",We,[Xe,Object(o["F"])(Object(o["g"])("input",{type:"password",class:e.isnewpassword2,"onUpdate:modelValue":t[14]||(t[14]=function(t){return e.newpassword2=t}),spellcheck:"false",minlength:"6",maxlength:"16",placeholder:"password",onInput:t[15]||(t[15]=function(){return n.isnewpassword2verify&&n.isnewpassword2verify.apply(n,arguments)}),required:""},null,34),[[o["B"],e.newpassword2]]),Qe])]),Object(o["g"])("button",{class:"btn btn-primary col-4 mt-3 me-2 rounded-pill",onClick:t[16]||(t[16]=function(){return n.RegisterSend&&n.RegisterSend.apply(n,arguments)}),type:"button"}," 註冊 ")])])]),e.loading?(Object(o["q"])(),Object(o["d"])(c,{key:0,loadtext:"載入中..."})):Object(o["e"])("",!0)],64)}var $e={class:"loading-screen"},et=Object(o["g"])("div",{class:"loading-circle"},null,-1),tt={class:"loading-text"};function at(e,t,a,n,r,s){return Object(o["q"])(),Object(o["d"])("div",$e,[et,Object(o["g"])("p",tt,Object(o["x"])(a.loadtext),1)])}var ot={name:"Loading",props:{loadtext:String}};a("fb0a");ot.render=at;var nt=ot,rt={name:"Login",components:{LoaadView:nt},setup:function(){var e=Object(K["b"])(),t=Object(Y["d"])(),a=/^[\w-#//\\]*@+[\w.]+(.[A-Za-z]){0,2}$/,n=/^[A-Za-z0-9]{6,16}$/,r=Object(o["s"])({isemail:"form-control border rounded-pill ps-5",ispassword:"form-control border rounded-pill ps-5",isnickname:"form-control border rounded-pill ps-4 mx-0",isnewemail:"form-control border rounded-pill ps-4 mx-0",isnewpassword1:"form-control border rounded-pill ps-4 mx-0",isnewpassword2:"form-control border rounded-pill ps-4 mx-0"}),c=Object(o["s"])({email:"",password:"",checked:!1,nickname:"",newemail:"",newpassword1:"",newpassword2:"",userinfo:[],loading:!1,starttime:"",accountfinished:!0});function l(){r.isemail="form-control border rounded-pill ps-5",c.email.length>0&&(r.isemail="form-control is-invalid border rounded-pill ps-5",1==a.test(c.email)&&c.email.length>4&&(r.isemail="form-control is-valid border rounded-pill ps-5"))}function i(){r.ispassword="form-control border rounded-pill ps-5",c.password.length>0&&(r.ispassword="form-control is-invalid border rounded-pill ps-5",1==n.test(c.password)&&(r.ispassword="form-control is-valid border rounded-pill ps-5"))}function d(){r.isnickname="form-control border rounded-pill ps-4 mx-0",c.nickname.length>0&&(r.isnickname="form-control is-valid border rounded-pill ps-4 mx-0")}function u(){r.isnewemail="form-control border rounded-pill ps-4 mx-0",c.newemail.length>0&&(r.isnewemail="form-control is-invalid border rounded-pill ps-4 mx-0",1==a.test(c.newemail)&&c.newemail.length>4&&(r.isnewemail="form-control is-valid border rounded-pill ps-4 mx-0"))}function p(){r.isnewpassword1="form-control border rounded-pill ps-4 mx-0",c.newpassword1.length>0?(r.isnewpassword1="form-control is-invalid border rounded-pill ps-4 mx-0",1==n.test(c.newpassword1)&&(r.isnewpassword1="form-control is-valid border rounded-pill ps-4 mx-0",c.newpassword1===c.newpassword2?r.isnewpassword2="form-control is-valid border rounded-pill ps-4 mx-0":r.isnewpassword2="form-control is-invalid border rounded-pill ps-4 mx-0")):0==c.newpassword2.length&&0==c.newpassword1.length&&(r.isnewpassword2="form-control border rounded-pill ps-4 mx-0")}function m(){r.isnewpassword2="form-control border rounded-pill ps-4 mx-0",c.newpassword2.length>0&&(r.isnewpassword2="form-control is-invalid border rounded-pill ps-4 mx-0",1==n.test(c.newpassword2)&&c.newpassword1===c.newpassword2&&(r.isnewpassword2="form-control is-valid border rounded-pill ps-4 mx-0"))}function b(){localStorage.getItem("usermemory")||(c.email="",c.password=""),c.nickname="",c.newemail="",c.newpassword1="",c.newpassword2="",c.userinfo=[],r.isemail="form-control border rounded-pill ps-5",r.ispassword="form-control border rounded-pill ps-5",r.isnickname="form-control border rounded-pill ps-4 mx-0",r.isnewemail="form-control border rounded-pill ps-4 mx-0",r.isnewpassword1="form-control border rounded-pill ps-4 mx-0",r.isnewpassword2="form-control border rounded-pill ps-4 mx-0"}function g(){localStorage.getItem("usermemory")||(c.email="",c.password=""),c.newemail="",c.userinfo=[],r.isemail="form-control border rounded-pill ps-5",r.ispassword="form-control border rounded-pill ps-5",r.isnewemail="form-control border rounded-pill ps-4 mx-0"}function f(){c.password="",c.nickname="",c.newemail="",c.newpassword1="",c.newpassword2="",c.userinfo=[],r.ispassword="form-control border rounded-pill ps-5",r.isnickname="form-control border rounded-pill ps-4 mx-0",r.isnewemail="form-control border rounded-pill ps-4 mx-0",r.isnewpassword1="form-control border rounded-pill ps-4 mx-0",r.isnewpassword2="form-control border rounded-pill ps-4 mx-0"}function h(e){var t=Swal.mixin({toast:!0,position:"center",showConfirmButton:!1,timer:1500,timerProgressBar:!0,didOpen:function(e){e.addEventListener("mouseenter",Swal.stopTimer),e.addEventListener("mouseleave",Swal.resumeTimer)}});t.fire({icon:"error",title:e})}function w(){var e,t,a=Swal.mixin({customClass:{denyButton:"btn btn-success",footer:"btn"},buttonsStyling:!1});a.fire({title:'<p class="fw-bolder">請完成信箱驗證</p>',html:'<div><b class="me-1 text-danger"></b><span class="ms-1 fw-bold">秒後自動關閉</span></div>',allowOutsideClick:!1,showCloseButton:!0,showDenyButton:!0,denyButtonText:"已驗證",position:"center",footer:'<div>\n          <div class="col-12">\n          <span class="fw-bold me-2">未收到驗證碼?</span>\n          <span id="re-verified" class="fw-bolder text-info">重發驗證碼</span>\n          </div>\n          <div id="delete-account" class="col-12 fs-5 fw-bolder text-danger">\n          刪除帳號\n          </div>\n          </div>',timer:61e3,timerProgressBar:!0,didOpen:function(){Swal.showLoading(),t=60;var a=Swal.getHtmlContainer().querySelector("b");e=setInterval((function(){a.textContent=t--}),1e3)},willClose:function(){clearInterval(e)}}).then((function(e){if(e.isDenied){var t=JSON.parse(localStorage.getItem("tempuser"));t[0].emailverification=!0,v("tempuser",t),c.accountfinished,window.location.reload()}else"close"==e.dismiss&&(clearTimeout(c.starttime),z(),O("tempuser"))})),document.getElementById("re-verified").onclick=function(){clearTimeout(c.starttime),M()},document.getElementById("delete-account").onclick=function(){for(var e=document.getElementsByClassName("swal2-close"),t=0;t<e.length;t++)e[t].click()}}function v(e,t){localStorage.setItem(e,JSON.stringify(t))}function O(e){localStorage.getItem(e)&&localStorage.removeItem(e)}function j(a){ie()({method:"post",url:e.state.api.GoogleAPI,params:a}).then((function(o){if(200===o.status){var n=o.data;if("1"==a["task"]){if("0"==n[0]["status"]){c.checked,O("usermemory");var r=(new Date).getTime(),s=r.toString(),l=ce.a.AES.encrypt(a["email"],s).toString(),i=ce.a.AES.encrypt(l,n[0]["token"]).toString(),d=ce.a.AES.encrypt(s,n[0]["token"]).toString();c.userinfo.push({nickname:a["nickname"],email:i,level:"1",token:n[0]["token"],avatar:"",storetime:d}),v("user",c.userinfo),c.loading=!1,b(),t.replace({name:"Information"})}else if("1"==n[0]["status"])return c.loading=!1,g(),void h("此信箱已被使用!!")}else if("2"==a["task"]){if("0"==n[0]["status"]){var u=(new Date).getTime(),p=u.toString(),m=ce.a.AES.encrypt(a["email"],p).toString(),f=ce.a.AES.encrypt(m,n[0]["token"]).toString(),w=ce.a.AES.encrypt(p,n[0]["token"]).toString();c.userinfo.push({nickname:n[0]["nickname"],email:f,level:n[0]["level"],token:n[0]["token"],avatar:n[0]["avatar"],storetime:w}),v("user",c.userinfo),e.dispatch("auth/LoginTask",c.userinfo),c.loading=!1,b(),t.replace({name:"Information"})}else if("1"==n[0]["status"]){var x={email:a["email"],password:a["password"],task:"5"};j(x)}}else if("5"==a["task"])if("0"==n[0]["status"]){var y={email:a["email"],password:a["password"],task:"2"};j(y),c.loading=!1}else"1"==n[0]["status"]&&(O("usermemory"),c.loading=!1,h("未註冊帳號!!"));else"6"==a["task"]&&("0"==n[0]["status"]?(Object(ee["f"])(ne,a["email"]).then((function(){Swal.fire("請前往信箱修改","","success")})).catch((function(){h("可能沒有此帳號")})),c.loading=!1):"1"==n[0]["status"]&&(h("可能沒有此帳號"),c.loading=!1))}else console.log("api回應失敗")})).catch((function(){console.log("api呼叫失敗")}))}function x(){""!=c.email&&""!=c.password?0!=a.test(c.email)?0!=n.test(c.password)?I():h("密碼格式錯誤"):h("信箱格式錯誤"):h("帳密不能為空")}function y(){return k.apply(this,arguments)}function k(){return k=Object(Q["a"])(regeneratorRuntime.mark((function e(){var t,a,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Swal.fire({title:"請輸入您的email",input:"email",inputPlaceholder:"例如:XXXX@gmail.com",showCancelButton:!0,confirmButtonText:"確認",cancelButtonText:"取消"});case 2:t=e.sent,a=t.value,a&&(o={email:a,task:"6"},c.loading=!0,j(o));case 5:case"end":return e.stop()}}),e)}))),k.apply(this,arguments)}function S(){""!=c.nickname&&""!=c.newemail&&""!=c.newpassword1&&""!=c.newpassword2?0!=a.test(c.newemail)?0!=n.test(c.newpassword1)&&0!=n.test(c.newpassword2)?c.newpassword1===c.newpassword2?C():h("密碼確認不同"):h("密碼格式錯誤"):h("信箱格式錯誤"):h("註冊輸入不能為空")}function C(){Object(ee["a"])(ne,c.newemail,c.newpassword2).then((function(){c.userinfo.push({nickname:c.nickname,email:c.newemail,password:c.newpassword2,emailverification:!1}),v("tempuser",c.userinfo),M(),b()})).catch((function(e){"auth/email-already-in-use"==e.code?h("此信箱已被使用"):"auth/invalid-email"==e.code?h("此信箱無法接收驗證碼"):console.log("註冊出錯"),g()}))}function I(){var e="";if(localStorage.getItem("usermemory")){var t=JSON.parse(localStorage.getItem("usermemory")),a=ce.a.AES.decrypt(t[0].password,"encryptyourpassword"),o=a.toString(ce.a.enc.Utf8);e=c.password==o?c.password:o}else e=c.password;Object(ee["g"])(ne,c.email,e).then((function(){if(1==c.checked)if(localStorage.getItem("usermemory")){var t=JSON.parse(localStorage.getItem("usermemory")),a=ce.a.AES.decrypt(t[0].email,"encryptyouremail"),o=a.toString(ce.a.enc.Utf8),n=ce.a.AES.decrypt(t[0].password,"encryptyourpassword"),r=n.toString(ce.a.enc.Utf8);if(c.email!==o||e!==r){var s=ce.a.AES.encrypt(e,"encryptyourpassword").toString(),l=ce.a.AES.encrypt(c.email,"encryptyouremail").toString();c.userinfo.push({email:l,password:s}),v("usermemory",c.userinfo)}}else{var i=ce.a.AES.encrypt(e,"encryptyourpassword").toString(),d=ce.a.AES.encrypt(c.email,"encryptyouremail").toString();c.userinfo.push({email:d,password:i}),v("usermemory",c.userinfo)}else O("usermemory");if(1==ne.currentUser.emailVerified){var u={email:c.email,password:e,task:"2"};c.loading=!0,j(u),b()}else 0==ne.currentUser.emailVerified&&M()})).catch((function(e){if(O("usermemory"),"auth/invalid-email"==e.code)h("此信箱無效");else if("auth/user-not-found"==e.code)h("此信箱尚未註冊");else{if("auth/wrong-password"==e.code)return h("密碼輸入錯誤"),void f();console.log("登入出錯")}b()}))}function z(){return B.apply(this,arguments)}function B(){return B=Object(Q["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:c.accountfinished=!0,localStorage.getItem("tempuser")&&(t=JSON.parse(localStorage.getItem("tempuser")),ne.currentUser.email!==t[0].email&&Object(ee["g"])(ne,t[0].email,t[0].password)),Object(ee["b"])(ne.currentUser).then((function(){console.log("刪除成功")})).catch((function(){var e=ne.currentUser;""!==e?z():console.log("刪除失敗")}));case 3:case"end":return e.stop()}}),e)}))),B.apply(this,arguments)}function M(){ne.languageCode="zh-TW",Object(ee["e"])(ne.currentUser).then((function(){w(),c.starttime=setTimeout((function(){c.accountfinished=!0,window.location.reload()}),61e3)})).catch((function(){console.log("驗證碼發送次數過多"),w(),c.starttime=setTimeout((function(){c.accountfinished=!0,window.location.reload()}),61e3)}))}function A(){if(localStorage.getItem("user"))O("tempuser"),t.replace({name:"Information"});else{var e=ne.currentUser;""!==e&&Object(ee["d"])(ne,(function(e){if(1==e.emailVerified){c.accountfinished=!0;var t=JSON.parse(localStorage.getItem("tempuser")),a={nickname:t[0].nickname,email:t[0].email,password:t[0].password,task:"1"};localStorage.removeItem("tempuser"),c.loading=!0,j(a)}else 0==e.emailVerified&&(c.accountfinished=!1)}))}}return Object(o["o"])((function(){if(localStorage.getItem("user")&&e.dispatch("auth/SignoutTask"),1==c.accountfinished&&localStorage.getItem("tempuser")){var t=JSON.parse(localStorage.getItem("tempuser")),a=t[0].emailverification;if(0==a){var o=t[0].email;Swal.fire({title:"尚有未創建成功之帳號",html:'<div class="fw-bolder text-secondary">信箱:'+o+"</div>",allowOutsideClick:!1,confirmButtonText:"繼續完成",showDenyButton:!0,denyButtonText:"重創帳號",confirmButtonColor:"#3085d6",denyButtonColor:"#d33"}).then((function(e){e.isConfirmed?(w(),c.starttime=setTimeout((function(){window.location.reload()}),61e3)):e.isDenied&&(z(),O("tempuser"))}))}}if(localStorage.getItem("usermemory")){c.checked=!0;var n=JSON.parse(localStorage.getItem("usermemory")),r=ce.a.AES.decrypt(n[0].email,"encryptyouremail"),s=r.toString(ce.a.enc.Utf8);c.email=s;for(var l=ce.a.AES.decrypt(n[0].password,"encryptyourpassword"),i=l.toString(ce.a.enc.Utf8),d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghjklmnopqrstuvwxyz0123456789",u="",p=i.length;p>0;--p)u+=d[Math.floor(Math.random()*d.length)];c.password=u}A()})),Object(Y["c"])((function(e,t,a){0!=c.accountfinished?a():Swal.fire({title:"離開當前面",html:'<div class="fw-bolder text-secondary">創建帳號未完成時不會儲存資料</div>',allowOutsideClick:!1,confirmButtonText:"確認",showDenyButton:!0,denyButtonText:"繼續完成",confirmButtonColor:"#3085d6",denyButtonColor:"#d33"}).then((function(e){if(e.isConfirmed)clearTimeout(c.starttime),z(),O("tempuser"),a();else if(e.isDenied)return w(),c.starttime=setTimeout((function(){window.location.reload()}),61e3),!1}))})),Object(s["a"])(Object(s["a"])(Object(s["a"])({},Object(o["y"])(r)),Object(o["y"])(c)),{},{isemailverify:l,ispasswordverify:i,isnicknameverify:d,isnewemailverify:u,isnewpassword1verify:p,isnewpassword2verify:m,InitData:b,InitEmail:g,InitPassword:f,AlertMessage:h,VerifiedAlert:w,SaveLocalStorage:v,DeleteLocalStorage:O,LoginSend:x,ForgetPassword:y,RegisterSend:S,GetData:j,firebaseRegister:C,firebaseLogin:I,firebaseDelete:z,firebaseSendVerified:M,firebaseState:A})}};a("1532");rt.render=Ye;var st=rt,ct={class:"container-fluid col-lg-4 col-md-12 mt-4 mx-auto"},lt={class:"mx-1 border border-top-0 border-2 p-0"},it=Object(o["g"])("div",{class:"border-top border-primary border-5 mb-3"},[Object(o["g"])("div",{class:"text-start fw-bolder fs-3 ms-3 mt-3"},"用戶編輯")],-1),dt=Object(o["g"])("hr",null,null,-1),ut={class:"mt-2 mx-2 w-auto"},pt=Object(o["g"])("div",{class:"text-start fs-5 fw-bold mb-2"},"暱稱",-1),mt={class:"col-lg-8 col-md-10 text-start border mb-2 ps-2"},bt=Object(o["g"])("div",{class:"text-start fs-5 fw-bold mb-2"},"信箱",-1),gt={class:"col-lg-8 col-md-10 text-start border mb-2 ps-2"},ft=Object(o["g"])("div",{class:"text-start fs-5 fw-bold"},"頭像",-1),ht={class:"my-2 ms-5","data-bs-toggle":"modal","data-bs-target":"#cropper-modal",id:"avatar-upload"},wt={xmlns:"http://www.w3.org/2000/svg",width:"15",height:"15",fill:"currentColor",class:"bi bi-person-circle",viewBox:"0 0 16 16",id:"avatar-show-svg"},vt=Object(o["g"])("path",{d:"M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"},null,-1),Ot=Object(o["g"])("path",{"fill-rule":"evenodd",d:"M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1z"},null,-1),jt=Object(o["g"])("div",{id:"hover-text"},"上傳頭像",-1),xt={class:"mt-4 mb-5"},yt={class:"modal fade",id:"cropper-modal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},kt={class:"\n        modal-dialog modal-xl modal-dialog-centered modal-dialog-scrollable\n      "},St={class:"modal-content"},Ct={class:"modal-header"},It=Object(o["g"])("h5",{class:"modal-title fs-5 fw-bold",id:"exampleModalLabel"}," 頭像裁剪 ",-1),zt={class:"modal-body p-0"},Bt={class:"mx-3 mt-2"},Mt=Object(o["g"])("hr",null,null,-1),At={class:"row col-11 mx-auto"},Vt={class:"col-lg-8 col-md-12",id:"cropper-box"},Tt={class:"m-0 border",id:"before-cropper"},Lt=Object(o["g"])("div",{class:"col-lg-4 col-md-12"},[Object(o["g"])("div",{class:"fw-bold fs-5 mt-2",id:"preview-text"},"裁剪預覽"),Object(o["g"])("div",{id:"preview-box-round"})],-1),Et={class:"col-lg-10 col-md-12 mt-3 mx-auto"},Ft={class:"col-lg-10 col-md-12 mt-2 mb-5 mx-auto"},Ht={class:"modal-footer"};function qt(e,t,a,n,r,s){return Object(o["q"])(),Object(o["d"])(o["a"],null,[Object(o["g"])("div",ct,[Object(o["g"])("div",lt,[it,dt,Object(o["g"])("div",ut,[pt,Object(o["g"])("div",mt,Object(o["x"])(e.nickname),1),bt,Object(o["g"])("div",gt,Object(o["x"])(e.email),1),ft,Object(o["g"])("div",ht,[Object(o["F"])(Object(o["g"])("img",{src:e.avatarurl,id:"avatar-show-img",alt:""},null,8,["src"]),[[o["C"],e.avatarshow]]),Object(o["F"])((Object(o["q"])(),Object(o["d"])("svg",wt,[vt,Ot],512)),[[o["C"],!e.avatarshow]]),jt])])]),Object(o["g"])("div",xt,[Object(o["g"])("button",{type:"button",class:"btn btn-success col-3 me-2",onClick:t[1]||(t[1]=function(e){return n.AccountOperation("3")})}," 上傳 "),Object(o["g"])("button",{type:"button",class:"btn btn-secondary col-3 me-2",onClick:t[2]||(t[2]=function(){return n.SignOut&&n.SignOut.apply(n,arguments)})}," 登出 "),Object(o["g"])("button",{type:"button",class:"btn btn-danger col-4",onClick:t[3]||(t[3]=function(){return n.DeleteUserCheck&&n.DeleteUserCheck.apply(n,arguments)})}," 刪除帳號 ")])]),Object(o["g"])("div",yt,[Object(o["g"])("div",kt,[Object(o["g"])("div",St,[Object(o["g"])("div",Ct,[It,Object(o["g"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:t[4]||(t[4]=function(){return n.ModalClose&&n.ModalClose.apply(n,arguments)})})]),Object(o["g"])("div",zt,[Object(o["g"])("div",Bt,[Object(o["g"])("input",{id:"file-url",class:"col-12",type:"file",accept:"image/*",onChange:t[5]||(t[5]=function(){return n.ChangeFile&&n.ChangeFile.apply(n,arguments)})},null,32)]),Mt,Object(o["g"])("div",At,[Object(o["g"])("div",Vt,[Object(o["F"])(Object(o["g"])("div",Tt," 剪裁區 ",512),[[o["C"],e.imageshow]]),Object(o["F"])(Object(o["g"])("img",{src:e.cropperurl,id:"cropper-img",alt:""},null,8,["src"]),[[o["C"],!e.imageshow]])]),Lt,Object(o["F"])(Object(o["g"])("div",Et,[Object(o["g"])("button",{type:"button",class:"\n                  btn btn-outline-secondary\n                  fw-bolder\n                  col-lg-3 col-md-2\n                  me-2\n                ",onClick:t[6]||(t[6]=function(){return n.ZoomInImage&&n.ZoomInImage.apply(n,arguments)})}," 放大 "),Object(o["g"])("button",{type:"button",class:"\n                  btn btn-outline-secondary\n                  fw-bolder\n                  col-lg-3 col-md-2\n                  me-2\n                ",onClick:t[7]||(t[7]=function(){return n.ZoomOutImage&&n.ZoomOutImage.apply(n,arguments)})}," 縮小 "),Object(o["g"])("button",{type:"button",class:"btn btn-outline-secondary fw-bolder col-lg-3 col-md-3",onClick:t[8]||(t[8]=function(){return n.RotateImage&&n.RotateImage.apply(n,arguments)})}," 旋轉45° ")],512),[[o["C"],!e.imageshow]]),Object(o["F"])(Object(o["g"])("div",Ft,[Object(o["g"])("button",{type:"button",class:"\n                  btn btn-outline-secondary\n                  fw-bolder\n                  col-lg-3 col-md-2\n                  me-2\n                ",onClick:t[9]||(t[9]=function(){return n.ResetImage&&n.ResetImage.apply(n,arguments)})}," 重置 "),Object(o["g"])("button",{type:"button",class:e.cropperlockclass,onClick:t[10]||(t[10]=function(){return n.LockCropperBox&&n.LockCropperBox.apply(n,arguments)})},Object(o["x"])(e.cropperboxstatus),3),Object(o["g"])("button",{type:"button",class:e.cropperclearclass,onClick:t[11]||(t[11]=function(){return n.ClearCropper&&n.ClearCropper.apply(n,arguments)})},Object(o["x"])(e.cropperboxshow),3)],512),[[o["C"],!e.imageshow]])])]),Object(o["g"])("div",Ht,[Object(o["g"])("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal",onClick:t[12]||(t[12]=function(){return n.ModalClose&&n.ModalClose.apply(n,arguments)})}," 取消 "),Object(o["g"])("button",{type:"button",class:"btn btn-primary",onClick:t[13]||(t[13]=function(){return n.UploadImage&&n.UploadImage.apply(n,arguments)}),"data-bs-dismiss":"modal"}," 儲存 ")])])])])],64)}a("3ca3"),a("ddb0"),a("2b3d"),a("6107");var Ut=a("bab4"),Pt=a.n(Ut),Dt={name:"Information",setup:function(){var e=Object(K["b"])(),t=Object(Y["d"])(),a=Object(o["s"])({avatarurl:"",cropperurl:"",avatarshow:!1,imageshow:!0,cropper:"",cropperboxstatus:"鎖定",cropperboxshow:"裁剪框消失",cropperlockclass:"btn btn-outline-secondary fw-bolder col-lg-3 col-md-5 me-2",cropperclearclass:"btn btn-outline-secondary fw-bolder col-lg-3 col-md-5 px-1",nickname:"",email:"",userdata:[],imagename:"",uploadavatarcheck:!0});function n(e){var t=e.target.files||e.dataTransfer.files,o=t[0];a.imageshow=!1,a.cropperurl=window.URL.createObjectURL(o);var n=document.getElementById("cropper-img");a.cropper=new Pt.a(n,{viewMode:0,aspectRatio:1,background:!1,autoCropArea:.4,dragMode:"none",minCropBoxWidth:100,minCropBoxHeight:100,minContainerWidth:280,minContainerHeight:280,scalable:!1,preview:[document.querySelector("#preview-box-round")]}),a.cropper&&a.cropper.replace(a.cropperurl)}function r(){a.cropper.zoom(.3)}function c(){a.cropper.zoom(-.3)}function l(){a.cropper.rotate(45)}function i(){"解除鎖定"==a.cropperboxstatus&&(a.cropperlockclass="btn btn-outline-secondary fw-bolder col-lg-3 col-md-5 me-2",a.cropper.enable(),a.cropperboxstatus="鎖定"),"裁剪框顯示"==a.cropperboxshow&&(a.cropperclearclass="btn btn-outline-secondary fw-bolder col-lg-3 col-md-5 px-1",a.cropper.crop(),a.cropperboxshow="裁剪框消失"),a.cropper.reset()}function d(){"鎖定"==a.cropperboxstatus?(a.cropperlockclass="btn btn-outline-danger fw-bolder col-lg-3 col-md-5 me-2",a.cropper.disable(),a.cropperboxstatus="解除鎖定"):"解除鎖定"==a.cropperboxstatus&&(a.cropperlockclass="btn btn-outline-secondary fw-bolder col-lg-3 col-md-5 me-2",a.cropper.enable(),a.cropperboxstatus="鎖定")}function u(){"解除鎖定"==a.cropperboxstatus&&(a.cropperlockclass="btn btn-outline-secondary fw-bolder col-lg-3 col-md-5 me-2",a.cropper.enable()),"裁剪框消失"==a.cropperboxshow?(a.cropperclearclass="btn btn-outline-danger fw-bolder col-lg-3 col-md-5 px-1",a.cropper.clear(),a.cropperboxshow="裁剪框顯示",a.cropper.disable(),a.cropperboxstatus="解除鎖定"):"裁剪框顯示"==a.cropperboxshow&&(a.cropperclearclass="btn btn-outline-secondary fw-bolder col-lg-3 col-md-5 px-1",a.cropper.crop(),a.cropperboxstatus="鎖定",a.cropperboxshow="裁剪框消失")}function p(){var e=document.getElementById("file-url");e.value="",""!==a.cropper&&a.cropper.destroy(),a.imageshow=!0}function m(){a.imageshow||a.cropper.getCroppedCanvas({maxWidth:4096,maxHeight:4096,fillColor:"#fff",imageSmoothingEnabled:!0,imageSmoothingQuality:"high"}).toBlob((function(e){a.avatarshow=!0,Object(te["e"])(a.imagename,e).then((function(){Object(te["b"])(a.imagename).then((function(e){console.log(e),a.avatarurl=e,a.uploadavatarcheck=!1,p()})).catch((function(){a.avatarshow=!1,console.log("圖片取得失敗")}))})).catch((function(){a.avatarshow=!1,console.log("圖片上傳失敗")}))}),"image/jpeg",.95)}function b(e,t){var a=Swal.mixin({toast:!0,position:"center",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:function(e){e.addEventListener("mouseenter",Swal.stopTimer),e.addEventListener("mouseleave",Swal.resumeTimer)}});a.fire({icon:e,title:t})}function g(e){var t;"3"==e?(t={email:a.email,avatar:a.avatarurl,task:e},f(t)):"4"==e||"7"==e?(t={email:a.email,task:e},f(t)):console.log("指令錯誤")}function f(o){ie()({method:"post",url:e.state.api.GoogleAPI,params:o}).then((function(n){if(200===n.status){var r=n.data;"0"==r[0]["status"]?"3"==o["task"]?(a.uploadavatarcheck=!0,b("success","儲存成功"),a.userdata=JSON.parse(localStorage.getItem("user")),a.userdata[0].avatar=a.avatarurl,localStorage.setItem("user",JSON.stringify(a.userdata)),e.dispatch("auth/LoginTask",a.userdata[0])):"4"==o["task"]?e.dispatch("auth/SignoutTask"):"7"==o["task"]&&(e.dispatch("auth/SignoutTask"),localStorage.getItem("usermemory")&&localStorage.removeItem("usermemory"),localStorage.removeItem("user"),t.replace({name:"Login"})):"1"==r[0]["status"]&&("3"==o["task"]?b("error","儲存失敗"):"4"==o["task"]?b("error","登出失敗"):"7"==o["task"]&&b("error","帳號刪除失敗"))}else console.log("帳號操作失敗")})).catch((function(){console.log("api失敗")}))}function h(){var o=100;0==a.uploadavatarcheck&&(g("3"),o=5500),""!==ne.currentUser&&Object(ee["h"])(ne).then((function(){})).catch((function(){console.log("firebase登出失敗")})),g("4"),localStorage.removeItem("user"),e.dispatch("auth/SignoutTask"),setTimeout((function(){t.replace({name:"Login"})}),o)}function w(){return v.apply(this,arguments)}function v(){return v=Object(Q["a"])(regeneratorRuntime.mark((function e(){var t,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Swal.fire({title:"請輸入您的密碼",input:"password",inputPlaceholder:"例如:xxxxxx",inputAttributes:{minlength:6,maxlength:16,autocapitalize:"off",autocorrect:"off"},allowOutsideClick:!1,showCancelButton:!0,confirmButtonText:"確認",cancelButtonText:"取消"});case 2:t=e.sent,o=t.value,o&&Object(ee["g"])(ne,a.email,o).then((function(){O()})).catch((function(){var e=Swal.mixin({toast:!0,position:"center",showConfirmButton:!1,timer:2e3,timerProgressBar:!0,didOpen:function(e){e.addEventListener("mouseenter",Swal.stopTimer),e.addEventListener("mouseleave",Swal.resumeTimer)}});e.fire({icon:"error",title:"確認失敗"})}));case 5:case"end":return e.stop()}}),e)}))),v.apply(this,arguments)}function O(){a.uploadavatarcheck=!0,Object(ee["b"])(ne.currentUser).then((function(){})).catch((function(){console.log("帳號刪除失敗")})),Object(te["a"])(a.imagename).then((function(){})).catch((function(){console.log("頭像刪除失敗")})),g("7")}return Object(o["o"])((function(){var o=localStorage.getItem("user");if(o){a.userdata=JSON.parse(o),e.dispatch("auth/LoginTask",a.userdata[0]),a.nickname=a.userdata[0].nickname;var n=ce.a.AES.decrypt(a.userdata[0].storetime,a.userdata[0].token),r=n.toString(ce.a.enc.Utf8),s=ce.a.AES.decrypt(a.userdata[0].email,a.userdata[0].token),c=s.toString(ce.a.enc.Utf8),l=ce.a.AES.decrypt(c,r),i=l.toString(ce.a.enc.Utf8);a.email=i,a.imagename=Object(te["d"])(re,"images/"+a.email.replace(".","_")+".jpeg"),""!=a.userdata[0].avatar&&Object(te["b"])(a.imagename).then((function(e){a.userdata[0].avatar==e?(a.avatarurl=a.userdata[0].avatar,a.avatarshow=!0):Swal.fire({icon:"warning",title:"頭像取得失敗，請重新登入或上傳",text:"可能原因為:1.未上傳成功2.已從其它地方上傳頭像"})}))}else t.replace({name:"Login"});0==a.uploadavatarcheck&&window.addEventListener("beforeunload",(function(e){e.returnValue="無儲存"}))})),Object(Y["c"])((function(e,t,o){0==a.uploadavatarcheck&&(g("3"),o()),o()})),Object(s["a"])(Object(s["a"])({},Object(o["y"])(a)),{},{ChangeFile:n,ZoomInImage:r,ZoomOutImage:c,RotateImage:l,ResetImage:i,LockCropperBox:d,ClearCropper:u,ModalClose:p,UploadImage:m,CallAlert:b,AccountOperation:g,APIcall:f,SignOut:h,DeleteUserCheck:w,DeleteUser:O})}};a("cc9c");Dt.render=qt;var Nt=Dt,Rt={class:"container-fluid col-lg-4 col-md-8 m-auto mt-3 px-4",id:"messagebox"},Jt=Object(o["g"])("legend",{class:"border border-2 border-danger bg-danger text-light"}," 留言板 ",-1),_t=Object(o["g"])("h5",{class:"text-start"},"你的回應",-1),Zt={class:"mt-3 px-2 rounded",id:"message-text"},Gt=Object(o["g"])("hr",{class:"mb-0 mx-2"},null,-1),Kt=Object(o["g"])("hr",{class:"mt-0 mb-2 mx-2"},null,-1),Wt={class:"d-inline-flex me-2 mb-1",id:"word-count"},Xt=Object(o["g"])("div",{class:"me-2"},"Characters:",-1),Qt={class:"mt-3 text-end"},Yt={key:0,class:"mt-3 text-end"},$t={class:"pagination"},ea=Object(o["g"])("a",{class:"page-link bg-danger text-light fw-bold",href:"#","aria-label":"Previous"},[Object(o["g"])("span",{"aria-hidden":"true"},"上一頁")],-1),ta={class:"page-item"},aa={class:"page-link",href:"#"},oa=Object(o["g"])("a",{class:"page-link bg-danger text-light fw-bold",href:"#","aria-label":"Next"},[Object(o["g"])("span",{"aria-hidden":"true"},"下一頁")],-1),na={class:"mt-3 mb-5",id:"messages-show"},ra={class:"col-lg-3 col-md-8 w-auto mx-2 mt-2 pb-1 text-dark",id:"messages-header"},sa={class:"fw-normal ms-1 pt-2",id:"header-nick"},ca={class:"text-end ms-0 me-2 pt-2"},la={class:"me-2"},ia={class:"text-nowrap"},da={class:"col-lg-3 col-md-8 w-auto mx-2 mt-2 pb-2 text-start text-break",id:"message-content"},ua={key:0,class:"px-3 mb-2",id:"message-replay-content"},pa={class:"mx-2 mt-0"},ma={class:"text-end col-lg-3 col-md-8 w-auto my-2 me-4"},ba=Object(o["g"])("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"14",fill:"currentColor",class:"bi bi-arrow-90deg-left me-1",viewBox:"0 0 16 16"},[Object(o["g"])("path",{"fill-rule":"evenodd",d:"M1.146 4.854a.5.5 0 0 1 0-.708l4-4a.5.5 0 1 1 .708.708L2.707 4H12.5A2.5 2.5 0 0 1 15 6.5v8a.5.5 0 0 1-1 0v-8A1.5 1.5 0 0 0 12.5 5H2.707l3.147 3.146a.5.5 0 1 1-.708.708l-4-4z"})],-1),ga=Object(o["f"])("回覆"),fa=Object(o["g"])("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",fill:"currentColor",class:"bi bi-trash me-1",viewBox:"0 0 16 16"},[Object(o["g"])("path",{d:"M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z"}),Object(o["g"])("path",{"fill-rule":"evenodd",d:"M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z"})],-1),ha=Object(o["f"])("刪除");function wa(e,t,a,n,r,s){var c=Object(o["v"])("LoaadView");return Object(o["q"])(),Object(o["d"])(o["a"],null,[Object(o["g"])("div",Rt,[Object(o["g"])("div",null,[Jt,_t,Object(o["F"])(Object(o["g"])("input",{type:"text",class:"form-control",maxlength:"6",ref:"refocus","onUpdate:modelValue":t[1]||(t[1]=function(t){return e.nickname=t}),spellcheck:"false",placeholder:"你的暱稱",autofocus:""},null,512),[[o["B"],e.nickname]])]),Object(o["g"])("div",Zt,[Gt,Object(o["F"])(Object(o["g"])("textarea",{class:"form-control border-0",placeholder:e.placeholdertext,rows:"3",spellcheck:"false",maxlength:"150","onUpdate:modelValue":t[2]||(t[2]=function(t){return e.messagecontent=t}),onInput:t[3]||(t[3]=function(){return n.TextareaInput&&n.TextareaInput.apply(n,arguments)})},null,40,["placeholder"]),[[o["B"],e.messagecontent]]),Kt,Object(o["g"])("div",Wt,[Xt,Object(o["g"])("div",null,Object(o["x"])(e.count)+"/150",1)])]),Object(o["g"])("div",Qt,[Object(o["g"])("button",{type:"button",class:"btn btn-primary rounded-pill col-3",onClick:t[4]||(t[4]=function(){return n.MessageSend&&n.MessageSend.apply(n,arguments)})}," 送出 ")]),e.totalpages>0?(Object(o["q"])(),Object(o["d"])("div",Yt,[Object(o["g"])("ul",$t,[Object(o["g"])("li",{class:"page-item",onClick:t[5]||(t[5]=function(){return n.PrePage&&n.PrePage.apply(n,arguments)})},[ea]),Object(o["g"])("li",ta,[Object(o["g"])("a",aa,Object(o["x"])(e.nowpage+1),1)]),Object(o["g"])("li",{class:"page-item",onClick:t[6]||(t[6]=function(){return n.NextPage&&n.NextPage.apply(n,arguments)})},[oa])])])):Object(o["e"])("",!0),Object(o["g"])("div",na,[(Object(o["q"])(!0),Object(o["d"])(o["a"],null,Object(o["u"])(e.totalmessages[e.nowpage],(function(t,a){return Object(o["q"])(),Object(o["d"])("div",{class:"col-lg-4 col-md-9 w-auto mb-3 border border-dark rounded-3",key:t},[Object(o["g"])("div",ra,[Object(o["g"])("div",sa,Object(o["x"])(t.nickName),1),Object(o["g"])("div",ca,[Object(o["g"])("span",la,"#"+Object(o["x"])(a+1),1),Object(o["g"])("span",ia,Object(o["x"])(t.inputTime),1)])]),Object(o["g"])("div",da,[t.replayContent.length>0?(Object(o["q"])(),Object(o["d"])("p",ua," 回覆: "+Object(o["x"])(t.replayContent),1)):Object(o["e"])("",!0),Object(o["g"])("p",pa,Object(o["x"])(t.messageContent),1)]),Object(o["g"])("div",ma,[Object(o["g"])("span",{class:"me-3 fw-bold",id:"SpanReplay",onClick:function(t){return n.MessageReplay(a+5*e.nowpage)}},[ba,ga],8,["onClick"]),Object(o["g"])("span",{class:"fw-bold",id:"SpanDelete",onClick:function(e){return n.MessageDelete(t.nickName,t.inputTime)}},[fa,ha],8,["onClick"])])])})),128))])]),e.loading?(Object(o["q"])(),Object(o["d"])(c,{key:0,loadtext:"載入中..."})):Object(o["e"])("",!0)],64)}a("fb6a");var va={name:"MessageBoard",components:{LoaadView:nt},setup:function(){var e=Object(K["b"])(),t=Object(o["t"])(null),a=Object(o["s"])({placeholdertext:"請輸入你的回應",count:0,nickname:"",messagecontent:"",replaycontent:"",messages:[],totalmessages:[],handlemessages:[],pageitem:5,totalpages:0,nowpage:0,loading:!1});function n(){a.totalpages=Math.ceil(a.messages.length/a.pageitem)}function r(){n(),a.totalmessages=[];for(var e=0;e<a.totalpages;e++)a.totalmessages[e]=a.messages.slice(a.pageitem*e,a.pageitem*(e+1))}function c(){a.nickname="",a.messagecontent="",a.count=0}function l(){var e=a.messagecontent.length;a.count=e}function i(){if(""!==a.nickname)if(""!==a.messagecontent){var e={task:"8",work:"1",nickName:a.nickname,messageContent:a.messagecontent,replayContent:a.replaycontent};a.loading=!0,b(e),c(),a.replaycontent="",a.placeholdertext="請輸入你的回應",r()}else Swal.fire({icon:"error",title:"請輸入內容!",confirmButtonText:"OK"});else Swal.fire({icon:"error",title:"請輸入暱稱!",confirmButtonText:"OK"})}function d(){a.nowpage>0&&(a.nowpage-=1)}function u(){a.nowpage+1<a.totalpages&&(a.nowpage+=1)}function p(e){self.scrollTo(0,0),t.value.focus(),a.replaycontent=a.messages[e].messageContent,a.placeholdertext="回覆: "+a.replaycontent,c()}function m(e,t){var o={task:"8",work:"2",nickName:e,inputTime:t};a.loading=!0,b(o),c(),a.placeholdertext="請輸入你的回應"}function b(t){ie()({method:"post",url:e.state.api.GoogleAPI,params:t}).then((function(e){200===e.status?(a.messages=e.data,r(),a.loading=!1,a.nowpage+1>a.totalpages&&d()):console.log("出錯啦")})).catch((function(e){console.log(e)}))}return Object(o["o"])((function(){var e={task:"8",work:"0"};a.loading=!0,b(e)})),Object(s["a"])(Object(s["a"])({refocus:t},Object(o["y"])(a)),{},{CountPages:n,MessagePages:r,InitData:c,TextareaInput:l,MessageSend:i,PrePage:d,NextPage:u,MessageReplay:p,MessageDelete:m,ShowData:b})}};a("50ab");va.render=wa;var Oa=va,ja=[{path:"/",name:"Home",component:je,meta:{requiresAuth:!1}},{path:"/about",name:"About",component:ye,meta:{requiresAuth:!1}},{path:"/login",name:"Login",component:st,meta:{requiresAuth:!1}},{path:"/information",name:"Information",component:Nt,meta:{requiresAuth:!0}},{path:"/message_board",name:"MessageBoard",component:Oa,meta:{requiresAuth:!0}},{path:"/:pathMatch(.*)*",name:"Home",component:je}],xa=Object(Y["a"])({history:Object(Y["b"])("/VueImplement/"),routes:ja});xa.beforeEach(function(){var e=Object(Q["a"])(regeneratorRuntime.mark((function e(t,a,o){var n,r,s,c,l,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.meta.requiresAuth?(n=localStorage.getItem("user"),n?(r=JSON.parse(n),s=(new Date).getTime(),c=ce.a.AES.decrypt(r[0].storetime,r[0].token),l=c.toString(ce.a.enc.Utf8),s-Number(l)>6048e5?(i=Object(K["b"])(),""!==ne.currentUser&&Object(ee["h"])(ne).then((function(){})).catch((function(){console.log("firebase登出失敗")})),ie()({method:"post",url:i.state.api.GoogleAPI,params:{email:r[0].email,task:"4"}}).then((function(e){if(200===e.status){var t=e.data;"0"==t[0]["status"]?i.dispatch("auth/SignoutTask"):"1"==t[0]["status"]&&console.log("登出失敗")}else console.log("帳號操作失敗")})).catch((function(){console.log("api失敗")})),localStorage.removeItem("user"),setTimeout((function(){o({name:"Login"})}),3e3)):r[0].token.length>0&&void 0!==r[0].token?o():o({name:"Login"})):o({name:"Login"})):o();case 1:case"end":return e.stop()}}),e)})));return function(t,a,o){return e.apply(this,arguments)}}());var ya=xa,ka={user:{path:"/login",pathname:"登入/註冊",usercheck:!1,avatarcheck:!1,userlevel:"",useravatar:"",usernickname:""}},Sa={Login:function(e,t){if(e.user.path="/information",e.user.pathname="用戶設置",e.user.usercheck=!0,""!==t.avatar){var a=new Image;a.onload=function(){(a.width>0||a.height>0)&&(e.user.avatarcheck=!0)},a.src=t.avatar}else e.user.avatarcheck=!1;e.user.useravatar=t.avatar,e.user.userlevel=t.level,e.user.usernickname=t.nickname},Signout:function(e){e.user.path="/login",e.user.pathname="登入/註冊",e.user.usercheck=!1,e.user.avatarcheck=!1,e.user.userlevel="",e.user.useravatar="",e.user.usernickname=""}},Ca={LoginTask:function(e,t){e.commit("Login",t)},SignoutTask:function(e){e.commit("Signout")}},Ia={},za={state:ka,mutations:Sa,actions:Ca,getters:Ia,namespaced:!0},Ba={GoogleAPI:"https://script.google.com/macros/s/AKfycbz9qsgs9nhdoRq4vB2umVHHDlNEbxZdAjrAwQ5aiYyX9Cs9yTKdcJG2E7Ps4AAc9I5qgQ/exec"},Ma={},Aa={},Va={},Ta={state:Ba,mutations:Ma,actions:Aa,getters:Va,namespaced:!0},La=Object(K["a"])({state:{},mutations:{},actions:{},modules:{auth:za,api:Ta}});a("ab8b"),a("0deb");Object(o["c"])(X).use(La).use(ya).mount("#app")},5750:function(e,t,a){"use strict";a("a36e")},"816c":function(e,t,a){},"8f4d":function(e,t,a){},9483:function(e,t,a){"use strict";a("8f4d")},a36e:function(e,t,a){},cc9c:function(e,t,a){"use strict";a("2d06")},d365:function(e,t,a){"use strict";a("13b6")},ed22:function(e,t,a){},fb0a:function(e,t,a){"use strict";a("24e4")}});
//# sourceMappingURL=app.2a46d5f3.js.map